-- deposit
output0
sats: 1000
OP_PUSH PUBKEY(LASZLO) OP_CHECKSIG
output1
sats: 98000
OP_PUSH PUBKEY(YOU) OP_CHECKSIG

-- multisig
sats: 100000 (1000 fees)
OP_2 OP_PUSH PUBKEY(LASZLO) OP_PUSH PUBKEY(YOU) OP_2 OP_CHECKMULTISIG

-- refund
sats: 99000 (1000 fees)
OP_PUSH PUBKEY(YOU) OP_CHECKSIG

-- refund 2
sats: 99000 (1000 fees)
OP_IF
    OP_PUSH PUBKEY(YOU) OP_CHECKSIG
OP_ELSE
    OP_2 OP_PUSH PUBKEY(REVOCATION_YOU_1) OP_PUSH PUBKEY(LASZLO) OP_2 OP_CHECKMULTISIG
OP_ENDIF

-- refund 3
sats: 99000 (1000 fees)
OP_IF
    OP_PUSH 700 OP_CHECKSEQUENCEVERIFY OP_DROP OP_PUSH PUBKEY(YOU) OP_CHECKSIG
OP_ELSE
    OP_2 OP_PUSH PUBKEY(REVOCATION_YOU_1) OP_PUSH PUBKEY(LASZLO) OP_2 OP_CHECKMULTISIG
OP_ENDIF

== making a payment
-- commitment YOU
output0
sats: 98000
OP_IF
    OP_PUSH 700 OP_CHECKSEQUENCEVERIFY OP_DROP OP_PUSH PUBKEY(YOU) OP_CHECKSIG
OP_ELSE
    OP_2 OP_PUSH PUBKEY(REVOCATION_YOU_2) OP_PUSH PUBKEY(LASZLO) OP_2 OP_CHECKMULTISIG
OP_ENDIF

output1 
sats: 1000
OP_PUSH PUBKEY(LASZLO) OP_CHECKSIG

-- commitment LASZLO
output0
sats: 1000
OP_IF
    OP_PUSH 700 OP_CHECKSEQUENCEVERIFY OP_DROP OP_PUSH PUBKEY(LASZLO) OP_CHECKSIG
OP_ELSE
    OP_2 OP_PUSH PUBKEY(REVOCATION_LASZLO_1) OP_PUSH PUBKEY(YOU) OP_2 OP_CHECKMULTISIG
OP_ENDIF

output1 
sats: 98000
OP_PUSH PUBKEY(YOU) OP_CHECKSIG

== make another payment
--
output0
sats: 1000
OP_IF OP_PUSH 700 OP_CHECKSEQUENCEVERIFY OP_DROP OP_PUSH PUBKEY(LASZLO) OP_CHECKSIG OP_ELSE OP_2 OP_PUSH PUBKEY(REVOCATION_LASZLO_1) OP_PUSH PUBKEY(YOU) OP_2 OP_CHECKMULTISIG OP_ENDIF

output1
sats: 98000
OP_PUSH PUBKEY(YOU) OP_CHECKSIG
